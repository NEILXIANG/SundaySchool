# 主日学照片整理工具（优化版）

## 🎯 特点
- 🎨 彩色界面，友好易用
- 🚀 性能优化，识别更快
- 🧠 智能功能，自动检测重复
- 🛡️ 错误处理，容错性强
- ⚙️ 灵活配置，适应不同需求
- ❌ **无需CSV文件** - 学生照片统一放在一个目录，按文件名识别
- ❌ **无需为每个学生在单独建文件夹**

## 📁 目录结构
```
classroom/
├── student_photos/          # 所有学生单人参考照放在这里
│   ├── ZhangSan_1.jpg        # 文件名格式：学生姓名_序号.jpg（姓名可用拼音或英文）
│   ├── ZhangSan_2.jpg
│   ├── LiSi_1.jpg
│   └── WangWu_1.jpg
└── class_photos/            # 课堂多人合照放这里
    └── class_2025-12-21.jpg
```

程序运行后会在 `class_photos` 内按拍摄日期自动创建子目录（如 `2025-12-21`），再进行人脸识别与分类。

## 🚀 使用步骤
1. **准备照片**
   - 将每位学生的单人照命名为 `姓名_序号.jpg`（如 `ZhangSan_1.jpg`），全部放入 `classroom/student_photos/`
   - 将所有课堂多人合照放入 `classroom/class_photos/`

2. **运行程序**
   ```bash
   cd sunday-photos
   python src/run.py
   ```
   （默认 `classroom_dir="classroom"`，`output_dir="output"`，`log_dir="logs"`）

3. **查看结果**
   - 整理后的照片在 `output/` 目录，按学生姓名及日期分类
   - 日志在 `logs/` 目录

## ⚙️ 高级选项
```bash
# 自定义课堂目录
python src/run.py --classroom-dir my_classroom

# 调整人脸识别阈值（0~1，越小越严格）
python src/run.py --tolerance 0.7

# 自定义输出目录
python src/run.py --output-dir output_photos

# 查看帮助
python src/run.py --help
```

## 📊 示例数据
项目已提供示例文件，可直接测试：
- `classroom/student_photos/` 下有 ZhangSan、LiSi、WangWu 的示例单人照
- `classroom/class_photos/` 下有示例课堂合照

## 🆘 常见问题

**Q: 人脸识别不准确？**  
A: 调整 `--tolerance` 参数（建议 0.4~0.8），或确保参考照片清晰正面。

**Q: 程序找不到学生照片？**  
A: 检查 `classroom/student_photos/` 是否存在，且文件名前缀为学生姓名（如 `ZhangSan_1.jpg`）。

**Q: 多人合照未分类？**  
A: 确保照片包含清晰人脸，并检查 `class_photos` 路径是否正确。

**Q: 照片太大运行慢？**  
A: 建议单张照片不超过 5MB，可先压缩再处理。

---
🎉 享受使用这个为您精心设计的工具！