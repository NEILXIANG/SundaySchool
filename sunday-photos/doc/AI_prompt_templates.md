# AI 需求与提示词模板（适配本项目：老师零参数照片整理）

本文档目的：
- 给“让 AI 编程更容易理解需求、边界条件、核心问题”的一套可复用模板。
- 同时提供：
  - 通用模板（任何项目都能用）
  - 针对本仓库的填空版模板（直接复制给 AI）
  - 专项模板：测试/打包/发布验收

更新时间：2025-12-22

---

## 0. 使用方法（推荐工作流）

1) 先用「模板 A」把需求写清楚（目标/边界/验收/非目标）。
2) 如果是在现有仓库上改造，用「模板 B（Brownfield）」。
3) 让 AI 输出“改动文件清单 + 验收命令 + 风险点”。
4) 要求 AI 在最后给出“自检清单”（口径一致性、边界条件、测试是否覆盖）。

---

## 1) 模板 A：通用“黄金提示词”模板（强烈推荐）

把下面整段复制给 AI，并把【方括号】内容替换为你的项目实际内容。

### 模板 A（可直接复制）

你是资深软件工程师 + 产品工程师。请在保证最少改动的前提下完成需求，并确保可测试、可发布。

【项目名称】
- 名称：【…】
- 一句话目标：【…】

【用户画像】
- 主要用户：【…】（能力水平、典型行为）
- 次要用户：【…】

【用户最小操作步骤（必须逐步可执行）】
1) 【…】
2) 【…】
3) 【…】

【禁止事项（必须明确写出来，防止 AI 跑偏）】
- 不允许用户做：【…】
- 本次不做：【…】

【输入/输出（务必具体到路径、命名、示例）】
- 输入目录结构：
  - 【path】含义【…】
- 文件命名规则：
  - 【pattern】示例【…】
- 输出目录结构：
  - 【path】含义【…】

【核心功能（按优先级）】
- FR1：【…】
- FR2：【…】
- FR3：【…】

【边界条件/异常场景（必须覆盖）】
- BC1：【…】
- BC2：【…】
- BC3：【…】

【错误提示规范（面向用户）】
- 错误提示必须包含：
  1) 发生了什么（非技术描述）
  2) 下一步怎么做（可执行动作）
  3) 日志/证据在哪（可用于求助）

【验收标准（必须可验证）】
- AC1：【…】
- AC2：【…】
- AC3：【…】

【测试要求】
- 需要新增/更新的测试：
  - 【…】
- 默认测试不应依赖：【…】

【交付要求】
- 请输出：
  - 改动文件清单（每个文件一句话说明）
  - 验收方式（命令/任务）
  - 风险点与回滚方式
  - 未解决问题（如有）

---

## 2) 模板 B：现有仓库改造（Brownfield）— 本项目专用填空版

当你在本仓库上继续迭代时，建议用下面这版。复制给 AI 后只需要改少量参数即可。

### 模板 B（本项目专用，可直接复制）

你在一个现有 Python 仓库中工作（pytest + PyInstaller）。该项目是“主日学课堂照片自动整理工具”。

【最重要的产品原则】
- 老师端必须“零参数、零配置、最少疑惑”。
- 文档/启动脚本/可执行文件名/控制台提示语必须一致。

【老师端体验（必须实现）】
1) 老师双击运行打包程序。
2) 程序在桌面自动创建 `SundaySchoolPhotoOrganizer/`，其中包含：
   - student_photos/
   - class_photos/
   - output/
   - logs/
  并且学生参考照必须遵循“单一规范”（不支持多种方式）：
  - 唯一正确方式：student_photos/<student_name>/...（每个学生一个一级子文件夹；文件名随意）
  - 禁止：student_photos 根目录直接放图片；禁止：在学生文件夹里再建更深层子文件夹
  - 每位学生最多使用 5 张参考照（超过则取最近修改时间最新的 5 张）
3) 若缺照片：提示老师把什么照片放到哪里，然后退出。
4) 若照片齐全：整理完成后自动打开 output/。
5) 识别不准时：不允许提示任何参数/阈值/配置；只给“三步法”（补清晰正脸参考照、参考照不要多人合照、课堂照尽量清晰明亮）。
6) 出错时：必须给出“发生了什么 + 下一步动作 + 日志位置（发最新日志）”。
7) 程序可能按日期移动课堂照到 YYYY-MM-DD/：必须提前解释这是正常现象。

【允许改动范围】
- 允许：入口输出文案、老师文档、错误提示闭环、默认行为一致性、测试用例、打包/验收说明。
- 禁止：引入 GUI、引入云服务、要求老师手动调参。

【验收方式】
- `pytest` 必须全绿。
- 如涉及发布：提供严格验收模式（要求打包产物存在/可执行/说明齐全）。

【你必须输出】
- 改动文件清单 + 每个文件的改动目的
- 新增/更新测试点
- 风险点（尤其是口径一致性与老师困惑点）

---

## 3) 模板 C：测试/打包/发布验收专项提示词

当你要 AI 帮你把发布流程变得可验证时，用这版。

### 模板 C（可直接复制）

目标：建立“开发日常稳定 + 发布前强校验”的双模式。

约束：
- 默认测试不得依赖打包产物；缺产物时应跳过相关用例。
- 发布验收必须能强制要求产物存在，并检查：
  - 可执行文件存在且可运行
  - 启动脚本存在
  - 使用说明存在

请输出：
- pytest 用例设计（开发模式 skip；严格模式 fail）
- 打包脚本要点（同一 venv、可复现、产物落到 release 目录）
- 一键验收命令（build → strict pytest）

---

## 4) 针对本项目的“核心问题清单”（可直接贴给 AI）

- K1 老师端必须零参数，否则必然增加求助成本。
- K2 入口/文档/脚本/产物名必须强一致，否则老师一定放错照片或运行错入口。
- K3 “自动按日期移动课堂照”属于正确行为但易吓人，必须提前解释。
- K4 错误提示必须包含“下一步动作 + 日志位置（发最新日志）”。
- K5 发布必须有严格验收门禁（产物存在性/可执行/说明齐全）。

---

## 5) 输出要求建议（让 AI 交付更可用）

请 AI 在最终答复里固定包含这些段落：
- What changed（做了什么）
- Why（为什么这样做）
- Risks（风险/不确定点）
- How to verify（怎么验证：命令/任务）
- Rollback（回滚方式）

这样你在审阅与交付时会非常省心。
