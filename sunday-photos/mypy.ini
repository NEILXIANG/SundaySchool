[mypy]
# 启用严格模式的核心检查
python_version = 3.10
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_any_unimported = False
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
check_untyped_defs = True
strict_equality = True

# 逐步启用严格模式（避免一次性修改过多）
# disallow_untyped_calls = True  # 暂不启用，需大量修改
# disallow_incomplete_defs = True  # 暂不启用

# 排除第三方库和已知问题模块
[mypy-insightface.*]
ignore_missing_imports = True

[mypy-onnxruntime.*]
ignore_missing_imports = True

[mypy-cv2.*]
ignore_missing_imports = True

[mypy-face_recognition.*]
ignore_missing_imports = True

[mypy-PIL.*]
ignore_missing_imports = True

[mypy-tqdm.*]
ignore_missing_imports = True

[mypy-pytest.*]
ignore_missing_imports = True

# 暂时放宽对某些模块的检查（逐步修复）
[mypy-src.core.face_recognizer]
disallow_untyped_defs = False
check_untyped_defs = False

[mypy-src.ui.interactive_guide]
disallow_untyped_defs = False

[mypy-tests.*]
disallow_untyped_defs = False
check_untyped_defs = False
